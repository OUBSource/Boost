{% extends "base.html" %}

{% block content %}
<div class="header">
    <div class="container header-content">
        <div class="logo">
            <i class="fas fa-bolt"></i>
            <span>Boost Messenger</span>
        </div>
        <ul class="nav-links">
            <li><a href="/chat"><i class="fas fa-comment-alt"></i> Общий чат</a></li>
            <li><a href="/logout"><i class="fas fa-sign-out-alt"></i> Выйти</a></li>
        </ul>
    </div>
</div>

<div class="container chat-container">
    <!-- Основное окно чата -->
    <div class="chat-main">
        <div class="chat-header">
            <img src="/static/default-avatar.png" alt="Avatar" class="chat-header-avatar">
            <div class="chat-header-info">
                <h4>Общий чат</h4>
                <p><span class="online-status"></span> Онлайн</p>
            </div>
        </div>
        
        <div class="chat-messages">
            {% for message in messages %}
            <div class="message {% if message.user_id == session.user_id %}sent{% else %}received{% endif %}" data-id="{{ message.id }}">
                <div class="message-inner">
                    {% if message.user_id != session.user_id %}
                    <div class="message-username">{{ message.author.username }}</div>
                    {% endif %}
                    <div>{{ message.content }}</div>
                    <div class="message-time">
                        {{ message.timestamp.strftime('%H:%M') }}
                        {% if message.user_id == session.user_id and message.is_read %}
                        <i class="fas fa-check-double" style="margin-left: 5px; color: #48BB78;"></i>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="chat-input">
            <form class="input-group">
                <input type="text" class="message-input" placeholder="Напишите сообщение..." autocomplete="off">
                <button type="submit" class="send-btn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
        </div>
    </div>
</div>
{% endblock %} 